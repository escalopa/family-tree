server:
  port: "8080"
  mode: "debug" # debug, release
  log_level: "info" # debug, info, warn, error
  allowed_origins:
    - "http://localhost:3000"
    - "http://localhost:5173"
  enable_hsts: false # Set to true in production with HTTPS
  cookie:
    access_token_max_age: 3600 # 1 hour
    refresh_token_max_age: 604800 # 7 days
    session_id_max_age: 604800 # 7 days
    path: "/"
    domain: ""
    secure: false # Set to true in production with HTTPS
    http_only: true

database:
  dsn: "host=localhost port=5432 user=familytree password=secret dbname=familytree sslmode=disable"
  # Alternative URI format: postgresql://familytree:secret@localhost:5432/familytree?sslmode=disable

redis:
  uri: "redis://localhost:6379/0"
  # With password: redis://:password@localhost:6379/0

jwt:
  secret: "your-super-secret-key-change-in-production"
  access_expiry: "15m"
  refresh_expiry: "168h" # 7 days

oauth:
  providers:
    google:
      order: 1  # Lower numbers appear first on login page, default is math.MaxInt if not set
      client_id: "your-google-client-id"
      client_secret: "your-google-client-secret"
      user_info_url: "https://www.googleapis.com/oauth2/v2/userinfo"
      scopes:
        - "https://www.googleapis.com/auth/userinfo.email"
        - "https://www.googleapis.com/auth/userinfo.profile"

    # Yandex OAuth configuration
    # yandex:
    #   order: 2
    #   client_id: "your-yandex-client-id"
    #   client_secret: "your-yandex-client-secret"
    #   user_info_url: "https://login.yandex.ru/info"
    #   scopes:
    #     - "login:email"
    #     - "login:info"
    #     - "login:avatar"

    # GitHub OAuth configuration
    # github:
    #   order: 3
    #   client_id: "your-github-client-id"
    #   client_secret: "your-github-client-secret"
    #   user_info_url: "https://api.github.com/user"
    #   scopes:
    #     - "user:email"

    # GitLab OAuth configuration
    # gitlab:
    #   order: 4
    #   client_id: "your-gitlab-client-id"
    #   client_secret: "your-gitlab-client-secret"
    #   user_info_url: "https://gitlab.com/api/v4/user"
    #   scopes:
    #     - "read_user"

  redirect_base_url: "http://localhost:5173"

s3:
  endpoint: "http://minio:9000"  # Use http://localhost:9000 for local development outside Docker
  region: "us-east-1"
  bucket: "family-tree-images"
  access_key: "minioadmin"
  secret_key: "minioadmin"

rate_limit:
  auth:
    enabled: true
    requests: 5
    window: 1m
    prefix: "auth"
  api:
    enabled: true
    requests: 100
    window: 1m
    prefix: "api"
  upload:
    enabled: true
    requests: 10
    window: 1h
    prefix: "upload"

upload:
  max_image_size: 3145728  # 3MB
  allowed_image_extensions:
    - ".jpg"
    - ".jpeg"
    - ".png"
    - ".gif"
    - ".webp"

maintenance:
  cleanup_interval: 1h
